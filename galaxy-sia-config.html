<script type="text/javascript">
RED.nodes.registerType('galaxy-sia-config',{
  category: 'config',
  color: '#a6d7a8',
  defaults: {
    name:                   { value:"" },
    panelIP:                { value:"", required:true },
    panelPort:              { value:10002, required:true, validate:RED.validators.number() },
    account:                { value:"", required:true },
    siaLevel:               { value:4, validate:RED.validators.number() },
    encryption:             { value:false },
    encryptionKey:          { value:"" },
    encryptionHex:          { value:false },
    discardTestMessages:    { value:false },
    ackType:                { value:"A_CRLF" },
    ackCustom:              { value:"" },
    periodicReportInterval: { value:0, validate:RED.validators.number() }
  },
  credentials: {
    pin: { type: "password" }
  },
  inputs: 0,
  outputs: 0,
  icon: "font-awesome/fa-cog",
  label: function() {
    return this.name||this.panelIP;
  }
});
</script>

<script type="text/html" data-template-name="galaxy-sia-config">
  <!-- NÃ¡zev uzlu -->
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name" data-input-name="name">
  </div>
  <!-- Panel IP -->
  <div class="form-row">
    <label for="node-input-panelIP"><i class="fa fa-wifi"></i> Panel IP</label>
    <input type="text" id="node-input-panelIP" data-input-name="panelIP" placeholder="192.168.1.100">
  </div>
  <!-- Panel Port -->
  <div class="form-row">
    <label for="node-input-panelPort"><i class="fa fa-plug"></i> Panel Port</label>
    <input type="number" id="node-input-panelPort" data-input-name="panelPort" placeholder="10002">
  </div>
  <!-- Account -->
  <div class="form-row">
    <label for="node-input-account"><i class="fa fa-hashtag"></i> Account</label>
    <input type="text" id="node-input-account" data-input-name="account" placeholder="1234">
  </div>
  <!-- SIA Level -->
  <div class="form-row">
    <label for="node-input-siaLevel"><i class="fa fa-signal"></i> SIA Level</label>
    <input type="number" id="node-input-siaLevel" data-input-name="siaLevel" placeholder="4">
  </div>
  <!-- Encryption -->
  <div class="form-row">
    <label for="node-input-encryption"><i class="fa fa-lock"></i> Encryption</label>
    <input type="checkbox" id="node-input-encryption" data-input-name="encryption" data-input-type="checkbox">
  </div>
  <!-- Encryption Key -->
  <div class="form-row">
    <label for="node-input-encryptionKey"><i class="fa fa-key"></i> Encryption Key</label>
    <input type="text" id="node-input-encryptionKey" data-input-name="encryptionKey">
  </div>
  <!-- Encryption is Hex -->
  <div class="form-row">
    <label for="node-input-encryptionHex"><i class="fa fa-code"></i> Key is Hex</label>
    <input type="checkbox" id="node-input-encryptionHex" data-input-name="encryptionHex" data-input-type="checkbox">
  </div>
  <!-- Discard Test Messages -->
  <div class="form-row">
    <label for="node-input-discardTestMessages"><i class="fa fa-filter"></i> Discard Test Messages</label>
    <input type="checkbox" id="node-input-discardTestMessages" data-input-name="discardTestMessages" data-input-type="checkbox">
  </div>
  <!-- ACK Type -->
  <div class="form-row">
    <label for="node-input-ackType"><i class="fa fa-reply"></i> ACK Type</label>
    <select id="node-input-ackType" data-input-name="ackType">
      <option value="A_CRLF">A_CRLF</option>
      <option value="A">A</option>
      <option value="ACK_CRLF">ACK_CRLF</option>
      <option value="ACK">ACK</option>
      <option value="CUSTOM">CUSTOM</option>
    </select>
  </div>
  <!-- Custom ACK -->
  <div class="form-row">
    <label for="node-input-ackCustom"><i class="fa fa-pencil"></i> Custom ACK</label>
    <input type="text" id="node-input-ackCustom" data-input-name="ackCustom">
  </div>
  <!-- Periodic Report Interval -->
  <div class="form-row">
    <label for="node-input-periodicReportInterval"><i class="fa fa-clock-o"></i> Periodic Report Interval (s)</label>
    <input type="number" id="node-input-periodicReportInterval" data-input-name="periodicReportInterval" placeholder="0 = disabled">
  </div>
</script>

<script type="text/html" data-help-name="galaxy-sia-config">
  <p>Configuration node for Galaxy Dimension SIA DC-09 connection.</p>
  <ul>
    <li><b>Panel IP/Port</b>: IP address and port of the panel.</li>
    <li><b>Account</b>: SIA account number.</li>
    <li><b>Encryption</b>: enable AES-128-ECB decryption.</li>
    <li><b>ACK Type</b>: handshake ACK format.</li>
    <li><b>Periodic Report Interval</b>: auto-poll every N seconds (0 = off).</li>
  </ul>
</script>
